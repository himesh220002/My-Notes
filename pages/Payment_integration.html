<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Payments Integration Plan — nhtml</title>
    <link rel="stylesheet" href="./../css/styles.css" />
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="mx-40 text-gray-800 font-sans">

    <!-- header -->
    <header class="flex justify-between items-center p-5 bg-white shadow mb-5 rounded-md">
        <div class="flex gap-3 items-center">
            <button class="cursor-pointer transition-all bg-blue-500 text-white px-6 py-2 rounded-lg
                    border-blue-600
                    border-b-[4px] hover:brightness-110 hover:-translate-y-[1px] hover:border-b-[6px]
                    active:border-b-[2px] active:brightness-90 active:translate-y-[2px]"
                onclick="window.location.href='./Tech_Deals_Security_Stack.html'">
                Prev
            </button>
            <div class="rounded-br-md p-2 bg-gray-700 text-white">Page No. 5</div>
        </div>

        <div class="flex gap-3 items-center">
            <button
                class="border hover:scale-95 duration-300 relative group cursor-pointer text-sky-50  overflow-hidden h-14 w-44 rounded-md bg-sky-200 p-2 flex justify-center items-center font-extrabold"
                onclick="window.location.href='../index.html'">
                <div
                    class="absolute right-32 -top-4 group-hover:top-1 group-hover:right-2 z-10 w-40 h-40 rounded-full group-hover:scale-150 duration-500 bg-sky-900">
                </div>
                <div
                    class="absolute right-2 -top-4 group-hover:top-1 group-hover:right-2 z-10 w-32 h-32 rounded-full group-hover:scale-150 duration-500 bg-sky-800">
                </div>
                <div
                    class="absolute -right-12 top-4 group-hover:top-1 group-hover:right-2 z-10 w-24 h-24 rounded-full group-hover:scale-150 duration-500 bg-sky-700">
                </div>
                <div
                    class="absolute right-20 -top-4 group-hover:top-1 group-hover:right-2 z-10 w-16 h-16 rounded-full group-hover:scale-150 duration-500 bg-sky-600">
                </div>
                <p class="z-10">Go to topics</p>
            </button>

            <button class="cursor-pointer transition-all bg-blue-500 text-white px-6 py-2 rounded-lg
                    border-blue-600
                    border-b-[4px] hover:brightness-110 hover:-translate-y-[1px] hover:border-b-[6px]
                    active:border-b-[2px] active:brightness-90 active:translate-y-[2px]"
                onclick="window.location.href='#'">
                Next
            </button>
        </div>
    </header>

    <main class="py-6">
        <h1 class="text-3xl font-bold text-center mb-10 text-gray-900">How to implement payment integration</h1>
        <p class="text-center text-gray-600 mb-10">
            A practical, implementation-first plan for UPI (scan & pay), Cards, and PayPal — with code, flows, and
            security.
        </p>

        <!-- Overview / Setup -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold mb-4 text-gray-900">Setup and installation (Ubuntu + Node)</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded shadow">
                    <h3 class="text-xl font-semibold mb-3 text-blue-700">System and project setup</h3>
                    <pre class="bg-gray-100 p-3 border-l-4 border-blue-600 text-sm overflow-x-auto">
sudo apt update
sudo apt install -y build-essential curl
# Node via nvm (recommended)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash
source ~/.bashrc
nvm install --lts

mkdir payments-plan && cd payments-plan
npm init -y
npm install express dotenv cors
# Payment SDKs
npm install razorpay stripe @paypal/checkout-server-sdk qrcode
# Security helpers
npm install zod helmet compression crypto
          </pre>

                    <p class="text-sm text-gray-700 mt-4">
                        Create a .env file with keys from providers:
                    </p>
                    <pre class="bg-gray-100 p-3 border-l-4 border-blue-600 text-sm overflow-x-auto">
# Razorpay (UPI + Cards in India)
RAZORPAY_KEY_ID=rzp_test_xxx
RAZORPAY_KEY_SECRET=xxxx

# Stripe (Cards, UPI in India beta/selected)
STRIPE_SECRET_KEY=sk_test_xxx
STRIPE_WEBHOOK_SECRET=whsec_xxx

# PayPal
PAYPAL_CLIENT_ID=xxx
PAYPAL_CLIENT_SECRET=xxx
PAYPAL_ENV=sandbox # or live

APP_BASE_URL=http://localhost:5173
SERVER_BASE_URL=http://localhost:3000
          </pre>
                </div>

                <div class="bg-white p-6 rounded shadow">
                    <h3 class="text-xl font-semibold mb-3 text-blue-700">Folder structure (suggested)</h3>
                    <pre class="bg-gray-100 p-3 border-l-4 border-blue-600 text-sm overflow-x-auto">
payments-plan/
  .env
  server/
    index.js
    payments/
      upi.razorpay.js
      card.stripe.js
      paypal.js
      webhooks.js
  web/
    index.html
    app.js
          </pre>

                    <h3 class="text-xl font-semibold mb-3 text-blue-700 mt-6">Core server bootstrap</h3>
                    <pre class="bg-gray-100 p-3 border-l-4 border-blue-600 text-sm overflow-x-auto">
// server/index.js
import "dotenv/config";
import express from "express";
import cors from "cors";
import helmet from "helmet";
import compression from "compression";
import upiRoutes from "./payments/upi.razorpay.js";
import cardRoutes from "./payments/card.stripe.js";
import paypalRoutes from "./payments/paypal.js";
import webhookRoutes from "./payments/webhooks.js";

const app = express();
app.use(helmet());
app.use(cors({ origin: process.env.APP_BASE_URL, credentials: true }));
app.use(express.json({ limit: "1mb" }));
app.use(compression());

app.use("/api/pay/upi", upiRoutes);
app.use("/api/pay/card", cardRoutes);
app.use("/api/pay/paypal", paypalRoutes);
app.use("/api/webhooks", webhookRoutes);

app.get("/health", (_, res) => res.json({ ok: true }));

app.listen(3000, () => console.log("Server listening on :3000"));
          </pre>
                </div>
            </div>
        </section>

        <!-- UPI Section -->
        <section class="mb-16">
            <h2 class="text-2xl font-bold mb-4 text-gray-900">UPI (scan and pay) — Razorpay approach</h2>
            <p class="mb-4 text-gray-700">
                Two patterns: generate a UPI QR/intent for “Scan & Pay”, or create a payment order with UPI method and
                redirect/collect via provider widget. Razorpay offers both; this guide uses Razorpay Orders for
                reliability and reconciliation.
            </p>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded shadow">
                    <h3 class="text-xl font-semibold mb-3 text-purple-700">Backend: Create order and QR</h3>
                    <pre class="bg-gray-100 p-3 border-l-4 border-purple-600 text-sm overflow-x-auto">
// server/payments/upi.razorpay.js
import express from "express";
import Razorpay from "razorpay";
import crypto from "crypto";
import QRCode from "qrcode";

const router = express.Router();

const razorpay = new Razorpay({
  key_id: process.env.RAZORPAY_KEY_ID,
  key_secret: process.env.RAZORPAY_KEY_SECRET,
});

// Create an order for UPI payment
router.post("/create-order", async (req, res) => {
  const { amount, currency = "INR", receipt } = req.body;
  try {
    const order = await razorpay.orders.create({
      amount: Math.round(amount * 100), // INR in paise
      currency,
      receipt: receipt || `rcpt_${Date.now()}`,
      notes: { purpose: "techdeals_upi" },
    });
    return res.json({ order });
  } catch (e) {
    console.error(e);
    return res.status(500).json({ error: "Order creation failed" });
  }
});

// Optionally generate static UPI QR (for scan & pay outside provider UI)
router.post("/generate-qr", async (req, res) => {
  const { payeeVpa, payeeName, amount, txnNote = "TechDeals" } = req.body;
  try {
    const upiString =
      `upi://pay?pa=${encodeURIComponent(payeeVpa)}&pn=${encodeURIComponent(payeeName)}` +
      `&am=${encodeURIComponent(amount)}&tn=${encodeURIComponent(txnNote)}&cu=INR`;
    const qrDataUrl = await QRCode.toDataURL(upiString);
    return res.json({ upiString, qrDataUrl });
  } catch (e) {
    console.error(e);
    return res.status(500).json({ error: "QR generation failed" });
  }
});

export default router;
          </pre>

                    <h3 class="text-xl font-semibold mt-6 mb-3 text-purple-700">Webhook verification</h3>
                    <pre class="bg-gray-100 p-3 border-l-4 border-purple-600 text-sm overflow-x-auto">
// server/payments/webhooks.js (Razorpay)
import express from "express";
import crypto from "crypto";

const router = express.Router();

router.post("/razorpay", express.json({ type: "*/*" }), (req, res) => {
  const signature = req.headers["x-razorpay-signature"];
  const secret = process.env.RAZORPAY_KEY_SECRET;
  const body = JSON.stringify(req.body);

  const expected = crypto.createHmac("sha256", secret).update(body).digest("hex");
  const valid = signature === expected;

  if (!valid) return res.status(400).json({ error: "Invalid signature" });

  const event = req.body; // e.g., payment.captured
  // Idempotently update your order/payment status here
  return res.json({ received: true });
});

export default router;
          </pre>
                </div>

                <div class="bg-white p-6 rounded shadow">
                    <h3 class="text-xl font-semibold mb-3 text-purple-700">Frontend: Create order and open checkout</h3>
                    <pre class="bg-gray-100 p-3 border-l-4 border-purple-600 text-sm overflow-x-auto">
&lt;!-- web/index.html (example snippet) --&gt;
&lt;script src="https://checkout.razorpay.com/v1/checkout.js"&gt;&lt;/script&gt;
&lt;button id="upiPay" class="bg-purple-600 text-white px-4 py-2 rounded"&gt;Pay via UPI&lt;/button&gt;
&lt;img id="upiQr" class="mt-3 hidden w-40 h-40" alt="UPI QR" /&gt;

&lt;script type="module"&gt;
  // web/app.js (inline for brevity)
  const SERVER = "http://localhost:3000";

  document.getElementById("upiPay").addEventListener("click", async () =&gt; {
    const orderRes = await fetch(`${SERVER}/api/pay/upi/create-order`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ amount: 199.0, currency: "INR" }),
    });
    const { order } = await orderRes.json();

    const options = {
      key: "RAZORPAY_KEY_ID_PUBLIC", // replace with your public key
      amount: order.amount,
      currency: order.currency,
      name: "Tech Deals",
      description: "UPI Payment",
      order_id: order.id,
      handler: function (response) {
        alert("Payment initiated. Awaiting capture/webhook.");
      },
      theme: { color: "#6D28D9" },
      method: { upi: true, card: false, netbanking: false, wallet: false },
    };

    const rzp = new window.Razorpay(options);
    rzp.open();
  });

  // Optional: Generate standalone UPI QR (without widget)
  async function generateUpiQr() {
    const r = await fetch(`${SERVER}/api/pay/upi/generate-qr`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ payeeVpa: "yourvpa@bank", payeeName: "Tech Deals", amount: 199 }),
    });
    const { qrDataUrl } = await r.json();
    const img = document.getElementById("upiQr");
    img.src = qrDataUrl;
    img.classList.remove("hidden");
  }
&lt;/script&gt;
</pre>

                    <h3 class="text-xl font-semibold mt-6 mb-3 text-purple-700">UPI flow diagram</h3>
                    <pre class="bg-gray-100 p-3 border-l-4 border-purple-600 text-sm overflow-x-auto">
[Client] -> POST /api/pay/upi/create-order
     <- { order_id }
[Client] -> Razorpay Checkout (method: UPI)
[User]   -> Complete payment in UPI app
[Razorpay] -> Webhook to /api/webhooks/razorpay (payment.captured)
[Server]   -> Verify signature, mark order paid (idempotent)
[Client]   -> Poll or receive status -> success UI
          </pre>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6">
                <div class="bg-white p-6 rounded shadow">
                    <h3 class="text-lg font-semibold mb-2">Security</h3>
                    <ul class="list-disc list-inside text-sm text-gray-700">
                        <li>Verify Razorpay webhook signatures (HMAC SHA256).</li>
                        <li>Never trust client-side success alone; reconcile on webhook.</li>
                        <li>Store provider IDs, status, and audit logs.</li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded shadow">
                    <h3 class="text-lg font-semibold mb-2">Improvements</h3>
                    <ul class="list-disc list-inside text-sm text-gray-700">
                        <li>Retry/idempotency keys for order updates.</li>
                        <li>Fallback flow: show static UPI QR if widget fails.</li>
                        <li>Rate limit payment creation per user/IP.</li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded shadow">
                    <h3 class="text-lg font-semibold mb-2">Result</h3>
                    <p class="text-sm text-gray-700">
                        Reliable UPI flow with strong reconciliation and minimal client-side coupling.
                    </p>
                </div>
            </div>
        </section>

        <!-- Cards Section -->
        <section class="mb-16">
            <h2 class="text-2xl font-bold mb-4 text-gray-900">Card payments — Stripe</h2>
            <p class="mb-4 text-gray-700">
                Use Stripe Payment Intents for SCA-ready, multi-step card flows. Supports save cards, webhooks, and
                dispute handling.
            </p>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded shadow">
                    <h3 class="text-xl font-semibold mb-3 text-blue-700">Backend: Create Payment Intent</h3>
                    <pre class="bg-gray-100 p-3 border-l-4 border-blue-600 text-sm overflow-x-auto">
// server/payments/card.stripe.js
import express from "express";
import Stripe from "stripe";
const router = express.Router();
const stripe = new Stripe(process.env.STRIPE_SECRET_KEY);

router.post("/create-intent", async (req, res) => {
  const { amount, currency = "inr", customerId } = req.body;
  try {
    const paymentIntent = await stripe.paymentIntents.create({
      amount: Math.round(amount * 100),
      currency,
      customer: customerId, // optional
      automatic_payment_methods: { enabled: true },
      metadata: { purpose: "techdeals_card" },
    });
    res.json({ clientSecret: paymentIntent.client_secret });
  } catch (e) {
    console.error(e);
    res.status(500).json({ error: "Failed to create intent" });
  }
});

export default router;
          </pre>

                    <h3 class="text-xl font-semibold mt-6 mb-3 text-blue-700">Webhooks: verify and mark paid</h3>
                    <pre class="bg-gray-100 p-3 border-l-4 border-blue-600 text-sm overflow-x-auto">
// server/payments/webhooks.js (Stripe)
import express from "express";
import Stripe from "stripe";
const stripe = new Stripe(process.env.STRIPE_SECRET_KEY);
const router = express.Router();

router.post("/stripe", express.raw({ type: "application/json" }), (req, res) => {
  const sig = req.headers["stripe-signature"];
  let event;
  try {
    event = stripe.webhooks.constructEvent(req.body, sig, process.env.STRIPE_WEBHOOK_SECRET);
  } catch (err) {
    return res.status(400).send(`Webhook Error: ${err.message}`);
  }

  if (event.type === "payment_intent.succeeded") {
    const pi = event.data.object;
    // update order status -> paid (idempotent)
  }
  res.json({ received: true });
});

export default router;
          </pre>
                </div>

                <div class="bg-white p-6 rounded shadow">
                    <h3 class="text-xl font-semibold mb-3 text-blue-700">Frontend: Elements flow</h3>
                    <pre class="bg-gray-100 p-3 border-l-4 border-blue-600 text-sm overflow-x-auto">
&lt;!-- In a React/Vite app or plain HTML --&gt;
&lt;script src="https://js.stripe.com/v3/"&gt;&lt;/script&gt;
&lt;div id="card-element" class="p-3 border rounded mb-2"&gt;&lt;/div&gt;
&lt;button id="cardPay" class="bg-blue-600 text-white px-4 py-2 rounded"&gt;Pay with Card&lt;/button&gt;

&lt;script&gt;
  const SERVER = "http://localhost:3000";
  let stripe, elements, card;

  (async function init() {
    stripe = Stripe("pk_test_xxx"); // publishable key
    elements = stripe.elements();
    card = elements.create("card");
    card.mount("#card-element");
  })();

  document.getElementById("cardPay").addEventListener("click", async () =&gt; {
    const res = await fetch(`${SERVER}/api/pay/card/create-intent`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ amount: 299.00, currency: "inr" }),
    });
    const { clientSecret } = await res.json();

    const result = await stripe.confirmCardPayment(clientSecret, {
      payment_method: { card }
    });

    if (result.error) {
      alert(result.error.message);
    } else if (result.paymentIntent &amp;&amp; result.paymentIntent.status === "succeeded") {
      alert("Payment succeeded (finalize server via webhook).");
    }
  });
&lt;/script&gt;
</pre>


                    <h3 class="text-xl font-semibold mt-6 mb-3 text-blue-700">Card flow diagram</h3>
                    <pre class="bg-gray-100 p-3 border-l-4 border-blue-600 text-sm overflow-x-auto">
[Client] -> /create-intent
<- { clientSecret }
[Client] -> Stripe.js confirmCardPayment
[Stripe] -> 3DS if needed -> succeeded
[Stripe] -> Webhook (payment_intent.succeeded)
[Server] -> Mark order paid (idempotent)
          </pre>
                </div>
            </div>
        </section>

        <!-- PayPal Section -->
        <section class="mb-16">
            <h2 class="text-2xl font-bold mb-4 text-gray-900">PayPal</h2>
            <p class="mb-4 text-gray-700">
                Use PayPal’s Checkout Server SDK to create and capture orders. Great for international coverage and
                PayPal wallets.
            </p>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded shadow">
                    <h3 class="text-xl font-semibold mb-3 text-amber-700">Backend: create and capture</h3>
                    <pre class="bg-gray-100 p-3 border-l-4 border-amber-600 text-sm overflow-x-auto">
// server/payments/paypal.js
import express from "express";
import paypal from "@paypal/checkout-server-sdk";

const router = express.Router();

function client() {
  const environment = process.env.PAYPAL_ENV === "live"
    ? new paypal.core.LiveEnvironment(process.env.PAYPAL_CLIENT_ID, process.env.PAYPAL_CLIENT_SECRET)
    : new paypal.core.SandboxEnvironment(process.env.PAYPAL_CLIENT_ID, process.env.PAYPAL_CLIENT_SECRET);
  return new paypal.core.PayPalHttpClient(environment);
}

router.post("/create-order", async (req, res) => {
  const { amount, currency = "USD" } = req.body;
  const request = new paypal.orders.OrdersCreateRequest();
  request.requestBody({
    intent: "CAPTURE",
    purchase_units: [{ amount: { currency_code: currency, value: amount.toFixed(2) } }],
  });
  const response = await client().execute(request);
  res.json({ id: response.result.id });
});

router.post("/capture-order", async (req, res) => {
  const { orderId } = req.body;
  const request = new paypal.orders.OrdersCaptureRequest(orderId);
  const response = await client().execute(request);
  // Update order -> paid
  res.json({ status: response.result.status, capture: response.result });
});

export default router;
          </pre>
                </div>

                <div class="bg-white p-6 rounded shadow">
                    <h3 class="text-xl font-semibold mb-3 text-amber-700">Frontend: Smart buttons</h3>
                    <pre class="bg-gray-100 p-3 border-l-4 border-amber-600 text-sm overflow-x-auto">
&lt;!-- web/index.html --&gt;
&lt;script src="https://www.paypal.com/sdk/js?client-id=YOUR_CLIENT_ID&amp;currency=USD"&gt;&lt;/script&gt;
&lt;div id="paypal-button-container"&gt;&lt;/div&gt;
&lt;script&gt;
const SERVER = "http://localhost:3000";

paypal.Buttons({
  createOrder: async () =&gt; {
    const r = await fetch(`${SERVER}/api/pay/paypal/create-order`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ amount: 9.99, currency: "USD" }),
    });
    const { id } = await r.json();
    return id;
  },
  onApprove: async (data) =&gt; {
    const r = await fetch(`${SERVER}/api/pay/paypal/capture-order`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ orderId: data.orderID }),
    });
    const res = await r.json();
    alert(`PayPal payment: ${res.status}`);
  },
}).render("#paypal-button-container");
&lt;/script&gt;
  </pre>

                    <h3 class="text-xl font-semibold mt-6 mb-3 text-amber-700">PayPal flow diagram</h3>
                    <pre class="bg-gray-100 p-3 border-l-4 border-amber-600 text-sm overflow-x-auto">
[Client] -> load PayPal JS
[Client] -> /create-order -> returns id
[Client] -> onApprove -> /capture-order
[Server] -> mark paid -> return success
          </pre>
                </div>



            </div>
            </div>
        </section>

        <!-- Security & Compliance -->
        <section class="mb-16">
            <h2 class="text-2xl font-bold mb-4 text-gray-900">Security considerations and workflow model</h2>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="bg-white p-6 rounded shadow">
                    <h3 class="text-lg font-semibold mb-2">Security</h3>
                    <ul class="list-disc list-inside text-sm text-gray-700">
                        <li>Use HTTPS everywhere (HSTS, secure cookies).</li>
                        <li>Do not store raw card data; delegate to PCI-compliant providers.</li>
                        <li>Verify webhooks (Razorpay HMAC, Stripe constructEvent, PayPal order capture responses).</li>
                        <li>Idempotent server updates; prevent double-spend.</li>
                        <li>Log with trace IDs; redact PII/secrets.</li>
                    </ul>
                </div>

                <div class="bg-white p-6 rounded shadow">
                    <h3 class="text-lg font-semibold mb-2">Workflow model</h3>
                    <pre class="bg-gray-100 p-3 border-l-4 border-gray-800 text-sm overflow-x-auto rounded">
Client -> Create (order/intent)
Provider UI -> Payment auth/complete
Provider -> Webhook or capture API
Server -> Verify + update order (idempotent)
Client -> Poll/confirm -> success UI + receipt
          </pre>
                </div>

                <div class="bg-white p-6 rounded shadow">
                    <h3 class="text-lg font-semibold mb-2">What improves this design</h3>
                    <ul class="list-disc list-inside text-sm text-gray-700">
                        <li>Background reconciliation worker (retry failed webhooks).</li>
                        <li>Webhook allowlist + signature verification.</li>
                        <li>Rate limiting and bot protection (per-IP, per-user).</li>
                        <li>Feature flags for gateway fallback/AB test.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Result & FAQ -->
        <section class="mb-20">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded shadow">
                    <h3 class="text-xl font-semibold mb-2">Result</h3>
                    <p class="text-sm text-gray-700">
                        You get a gateway-agnostic, secure payment layer with strong reconciliation. UPI-first in India,
                        cards globally, PayPal for wallet coverage.
                    </p>
                </div>
                <div class="bg-white p-6 rounded shadow">
                    <h3 class="text-xl font-semibold mb-2">FAQ solved</h3>
                    <ul class="list-disc list-inside text-sm text-gray-700">
                        <li><b>Do I need PCI-DSS?</b> Not for card data if you never touch it; use provider
                            elements/tokens.</li>
                        <li><b>How do I confirm success?</b> Trust provider webhook or capture response; client-side is
                            advisory.</li>
                        <li><b>What about refund/partial capture?</b> Use provider APIs and store reconciliation
                            references.</li>
                        <li><b>UPI international?</b> UPI is domestic (INR) with Indian PSPs.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Planning checklist -->
        <section class="mb-16">
            <h2 class="text-2xl font-bold mb-4 text-gray-900">Planning checklist (apply to any project)</h2>
            <ol class="bg-gray-100 p-5 rounded-md shadow space-y-2 list-decimal list-inside text-gray-700 w-full">
                <li class="p-2 rounded-md hover:bg-gray-200 transition">Decide gateways
                    <ol class="list-decimal list-inside ml-5 space-y-1 mt-2">
                        <li>India: Razorpay (UPI + cards) as primary</li>
                        <li>Global: Stripe (cards) + PayPal (wallet) as fallbacks</li>
                    </ol>
                </li>
                <li class="p-2 rounded-md hover:bg-gray-200 transition">Model orders and payments
                    <ol class="list-decimal list-inside ml-5 space-y-1 mt-2">
                        <li>orders(id, amount, currency, status)</li>
                        <li>payments(id, provider, provider_ref, status, order_id)</li>
                    </ol>
                </li>
                <li class="p-2 rounded-md hover:bg-gray-200 transition">Implement create + webhook/capture
                    <ol class="list-decimal list-inside ml-5 space-y-1 mt-2">
                        <li>Create order/intent API</li>
                        <li>Verify webhook signature/capture result</li>
                        <li>Idempotent status update</li>
                    </ol>
                </li>
                <li class="p-2 rounded-md hover:bg-gray-200 transition">Frontend UX
                    <ol class="list-decimal list-inside ml-5 space-y-1 mt-2">
                        <li>Fallback path if widget fails (QR/manual)</li>
                        <li>Clear status, retry, and receipt download</li>
                    </ol>
                </li>
                <li class="p-2 rounded-md hover:bg-gray-200 transition">Observability & security
                    <ol class="list-decimal list-inside ml-5 space-y-1 mt-2">
                        <li>Structured logs + trace IDs</li>
                        <li>Rate limiting + IP/device fingerprinting</li>
                        <li>Rotate API keys, restrict webhooks by IP when possible</li>
                    </ol>
                </li>
            </ol>
        </section>
    </main>

    <footer class="p-5 bg-white shadow rounded">
        <div class="flex justify-center gap-5">
            <button class="cursor-pointer transition-all bg-blue-500 text-white px-6 py-2 rounded-lg
                    border-blue-600
                    border-b-[4px] hover:brightness-110 hover:-translate-y-[1px] hover:border-b-[6px]
                    active:border-b-[2px] active:brightness-90 active:translate-y-[2px]"
                onclick="window.location.href='./Tech_Deals_Security_Stack.html'">
                Prev
            </button>
            <button class="cursor-pointer transition-all bg-blue-500 text-white px-6 py-2 rounded-lg
                    border-blue-600
                    border-b-[4px] hover:brightness-110 hover:-translate-y-[1px] hover:border-b-[6px]
                    active:border-b-[2px] active:brightness-90 active:translate-y-[2px]"
                onclick="window.location.href='#'">
                Next
            </button>
        </div>
    </footer>

</body>

</html>